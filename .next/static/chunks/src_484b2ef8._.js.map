{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/ProductCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport Image from \"next/image\";\nimport { useRouter } from \"next/navigation\";\nimport { useSession } from \"next-auth/react\";\nimport { useLocalization } from \"@/providers/LocalizationProvider\";\nimport { toast } from \"react-hot-toast\";\n\ninterface ProductCardProps {\n  product: {\n    id: string;\n    name: string;\n    description: string;\n    price: number;\n    image: string;\n    sizes: string[];\n  };\n}\n\nexport default function ProductCard({ product }: ProductCardProps) {\n  const [loading, setLoading] = useState(false);\n  const [selectedSize, setSelectedSize] = useState<string>(\"\");\n  const router = useRouter();\n  const { data: session } = useSession();\n  const { formatPrice, language } = useLocalization();\n\n  const translations = {\n    ru: {\n      addToCart: \"В корзину\",\n      adding: \"Добавление...\",\n      selectSize: \"Выберите размер\",\n      errorAdding: \"Ошибка при добавлении в корзину\",\n      loginRequired: \"Необходимо войти в систему\",\n      addedToCart: \"Товар добавлен в корзину\",\n    },\n    en: {\n      addToCart: \"Add to Cart\",\n      adding: \"Adding...\",\n      selectSize: \"Select size\",\n      errorAdding: \"Error adding to cart\",\n      loginRequired: \"Login required\",\n      addedToCart: \"Added to cart\",\n    },\n  };\n\n  const t = translations[language];\n\n  const addToCart = async () => {\n    if (!session) {\n      toast.error(t.loginRequired, {\n        duration: 5000,\n        position: \"top-center\",\n      });\n      router.push(\"/auth/login\");\n      return;\n    }\n\n    if (!selectedSize && product.sizes.length > 0) {\n      toast.error(t.selectSize, {\n        duration: 5000,\n        position: \"top-center\",\n      });\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const response = await fetch(\"/api/cart-new\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          productId: product.id,\n          quantity: 1,\n          size: selectedSize || \"ONE SIZE\",\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to add to cart\");\n      }\n\n      toast.success(t.addedToCart, {\n        duration: 5000,\n        position: \"top-center\",\n      });\n      \n      router.refresh();\n      router.push(\"/cart-new\");\n    } catch (err) {\n      console.error(\"Error adding to cart:\", err);\n      toast.error(t.errorAdding, {\n        duration: 5000,\n        position: \"top-center\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleProductClick = (e: React.MouseEvent) => {\n    // Prevent navigation if clicking on size buttons or add to cart button\n    if ((e.target as HTMLElement).tagName === 'BUTTON') {\n      return;\n    }\n    router.push(`/product/${product.id}`);\n  };\n\n  return (\n    <div \n      onClick={handleProductClick}\n      className=\"group bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-all duration-300 cursor-pointer\"\n    >\n      <div className=\"relative aspect-square overflow-hidden\">\n        <Image\n          src={product.image}\n          alt={product.name}\n          fill\n          priority\n          className=\"object-cover transform group-hover:scale-105 transition-transform duration-300\"\n          sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n        />\n      </div>\n      <div className=\"p-6\">\n        <h3 className=\"font-medium text-lg mb-2 group-hover:text-black transition-colors\">\n          {product.name}\n        </h3>\n        <p className=\"text-gray-600 text-sm mb-4\">{product.description}</p>\n\n        {product.sizes.length > 0 && (\n          <div className=\"mb-4\">\n            <label className=\"block text-sm text-gray-600 mb-2\">\n              {t.selectSize}:\n            </label>\n            <div className=\"flex flex-wrap gap-2\">\n              {product.sizes.map((size) => (\n                <button\n                  key={size}\n                  onClick={() => setSelectedSize(size)}\n                  className={`px-4 py-2 rounded-md border text-sm font-medium transition-all duration-200 ${\n                    selectedSize === size\n                      ? \"border-black bg-black text-white\"\n                      : \"border-gray-200 hover:border-gray-400 hover:bg-gray-50\"\n                  }`}\n                >\n                  {size}\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className=\"flex items-center justify-between mt-4 pt-4 border-t border-gray-100\">\n          <span className=\"font-bold text-lg\">\n            {formatPrice(product.price)}\n          </span>\n          <button\n            onClick={addToCart}\n            disabled={loading || (product.sizes.length > 0 && !selectedSize)}\n            className={`px-6 py-2.5 rounded-md text-sm font-medium transition-all duration-200 ${\n              loading || (product.sizes.length > 0 && !selectedSize)\n                ? \"bg-gray-200 text-gray-400 cursor-not-allowed\"\n                : \"bg-black text-white hover:bg-gray-800 active:transform active:scale-95\"\n            }`}\n          >\n            {loading ? t.adding : t.addToCart}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/catalog-new/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport ProductCard from \"@/components/ProductCard\";\n\nexport default function CatalogPage() {\n  const [products, setProducts] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchProducts();\n  }, []);\n\n  const fetchProducts = async () => {\n    try {\n      const response = await fetch(\"/api/products\");\n      if (!response.ok) throw new Error(\"Failed to fetch products\");\n      const data = await response.json();\n      setProducts(data);\n    } catch (err) {\n      console.error(\"Error fetching products:\", err);\n      setError(\"Ошибка при загрузке товаров\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const categories = Array.from(\n    new Set(products.map((product) => product.category))\n  );\n\n  const filteredProducts = selectedCategory\n    ? products.filter((product) => product.category === selectedCategory)\n    : products;\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-black\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-red-500 mb-4\">{error}</p>\n          <button\n            onClick={fetchProducts}\n            className=\"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 transition-colors\"\n          >\n            Попробовать снова\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      {/* Фильтры категорий */}\n      <div className=\"flex flex-wrap gap-2 mb-8\">\n        <button\n          onClick={() => setSelectedCategory(null)}\n          className={`px-4 py-2 rounded-full transition-colors ${\n            !selectedCategory\n              ? \"bg-black text-white\"\n              : \"bg-gray-100 hover:bg-gray-200\"\n          }`}\n        >\n          Все\n        </button>\n        {categories.map((category) => (\n          <button\n            key={category}\n            onClick={() => setSelectedCategory(category)}\n            className={`px-4 py-2 rounded-full transition-colors ${\n              selectedCategory === category\n                ? \"bg-black text-white\"\n                : \"bg-gray-100 hover:bg-gray-200\"\n            }`}\n          >\n            {category}\n          </button>\n        ))}\n      </div>\n\n      {/* Сетка товаров */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredProducts.map((product) => (\n          <ProductCard key={product.id} product={product} />\n        ))}\n      </div>\n\n      {filteredProducts.length === 0 && (\n        <div className=\"text-center py-12\">\n          <p className=\"text-gray-500\">Товары не найдены</p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAS,EAAE;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAExE,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR;QACF;gCAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM;YAC7B,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;YAClC,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,YAAY;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,aAAa,MAAM,IAAI,CAC3B,IAAI,IAAI,SAAS,GAAG,CAAC,CAAC,UAAY,QAAQ,QAAQ;IAGpD,MAAM,mBAAmB,mBACrB,SAAS,MAAM,CAAC,CAAC,UAAY,QAAQ,QAAQ,KAAK,oBAClD;IAEJ,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,OAAO;QACT,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAAqB;;;;;;kCAClC,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;;;;IAMT;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS,IAAM,oBAAoB;wBACnC,WAAW,CAAC,yCAAyC,EACnD,CAAC,mBACG,wBACA,iCACJ;kCACH;;;;;;oBAGA,WAAW,GAAG,CAAC,CAAC,yBACf,6LAAC;4BAEC,SAAS,IAAM,oBAAoB;4BACnC,WAAW,CAAC,yCAAyC,EACnD,qBAAqB,WACjB,wBACA,iCACJ;sCAED;2BARI;;;;;;;;;;;0BAcX,6LAAC;gBAAI,WAAU;0BACZ,iBAAiB,GAAG,CAAC,CAAC,wBACrB,6LAAC,oIAAA,CAAA,UAAW;wBAAkB,SAAS;uBAArB,QAAQ,EAAE;;;;;;;;;;YAI/B,iBAAiB,MAAM,KAAK,mBAC3B,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAE,WAAU;8BAAgB;;;;;;;;;;;;;;;;;AAKvC;GAnGwB;KAAA","debugId":null}}]
}